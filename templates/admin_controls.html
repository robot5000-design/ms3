{% extends "base.html" %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col-12 col-lg-6">
            <h3>Website Stats:</h3>
            <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Total Number of Users:
                    <span class="badge bg-primary rounded-pill">{{ number_users }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Total Number of Movies/TV Series Reviewed:
                    <span class="badge bg-primary rounded-pill">{{ number_movies }}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Total Number of Reviews:
                    <span class="badge bg-primary rounded-pill">{{ number_reviews }}</span>
                </li>
            </ul>
        </div>
        <div class="col-12 col-lg-6">
            <h3>Most Popular Reviews:</h3>
            <table class="table table-hover table-secondary table-bordered">
                <thead>
                    <tr>
                        <th scope="col">No.</th>
                        <th scope="col">Username</th>
                        <th scope="col">Title</th>
                        <th scope="col">Likes</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index in range(most_likes | length()) %}
                    <tr>
                        <th scope="row">{{ index + 1 }}</th>
                        <td><a
                                href="{{ url_for('my_reviews', user=most_likes[index].created_by, my_reviews_sort='latest', page=0) }}">{{ most_likes[index].created_by }}</a>
                        </td>
                        <td><a
                                href="{{ url_for('review_detail', tmdb_id=most_likes[index].tmdb_id, media_type=most_likes[index].media_type, review_detail_sort='latest') }}">{{ most_likes[index].original_title }}</a>
                        </td>
                        <td>{{ most_likes[index].sum_likes }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-lg-6">
            <h3>Add/Remove Genres:</h3>
            <form class="needs-validation" action="{{ url_for('admin_controls') }}" method="POST" novalidate>
                <select class="form-select select-genre" name="select-genre" size="10"
                    aria-label="Size 10 Select Genre">
                    <option value="" disabled>Genre List:</option>
                    <option value="">Select None</option>
                    {% for genre in genres %}
                    <option value="{{ genre.genre_name }}">{{ genre.genre_name.title() }}</option>
                    {% endfor %}
                </select>
                <div class="input-group">
                    <input type="text" name="new-genre" aria-label="Add genre" placeholder="Add a New Genre Here"
                        class="form-control" minlength="3" pattern="^[a-zA-Z\-]{3,15}$" maxlength="15">
                    <span class="invalid-feedback">must be 3-15 letters (including '-')</span>
                </div>
                <div class="btn btn-primary col-6 call-delete">Add and/or Delete Genre</div>
                <button type="submit" id="submit-form-1" name="submit-form-1"
                    class="btn btn-danger confirm-delete col-6 offset-6 d-none">Confirm
                    Add/Delete Genre
                </button>
            </form>
        </div>
        <div class="col-12 col-lg-6">
            <h3>Permanently Remove User(s):</h3>
            <form class="" action="{{ url_for('admin_controls') }}" method="POST">
                <select class="form-select select-user" name="select-user" size="10" aria-label="Size 10 Select User"
                    multiple required>
                    <option value="" disabled>User List:</option>
                    <option value="">Select None</option>
                    {% for user in user_list %}
                    <option value="{{ user }}">{{ user }}</option>
                    {% endfor %}
                </select>
                <div class="btn btn-primary col-6 call-delete delete-user">Delete User</div>
                <button type="submit" id="submit-form-2" name="submit-form-2"
                    class="btn btn-danger confirm-delete col-6 offset-6 d-none">Confirm
                    Delete User
                </button>
            </form>
        </div>
    </div>
</div>

{% endblock %}